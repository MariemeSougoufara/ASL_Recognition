<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>GÃ©nÃ©ration dâ€™image adversariale</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='adversarial.css') }}">
</head>
<body>

<div class="back-menu">
  <a href="{{ url_for('home') }}">
    <button>ğŸ  Retour au menu</button>
  </a>
</div>

<div class="attack-container">
  <h2>âš”ï¸ GÃ©nÃ©rer une image adversariale</h2>
  <p>Importez une image reprÃ©sentant un signe pour crÃ©er une version modifiÃ©e capable de tromper le modÃ¨le IA.</p>

  <form method="POST" enctype="multipart/form-data" class="attack-form">
    <input type="file" name="image" accept="image/*" required onchange="previewImage(event)">

<label for="epsilon"><strong>Niveau d'attaque (Îµ) :</strong></label>
<input type="range" id="epsilon" name="epsilon" min="0.01" max="0.5" step="0.01" value="0.05">
<span id="epsilon-value">0.05</span>


    <button type="submit">ğŸ’¥ GÃ©nÃ©rer l'attaque</button>
  </form>

  <div id="preview-container" style="display: none; margin-top: 20px;">
    <p style="font-weight: bold;">AperÃ§u de lâ€™image sÃ©lectionnÃ©e</p>
    <img id="preview" class="preview-image" src="#" alt="AperÃ§u de lâ€™image originale">
  </div>
</div>

<script>
  const slider = document.getElementById('epsilon');
  const value = document.getElementById('epsilon-value');
  slider.oninput = () => {
    value.textContent = slider.value;
  }

  function previewImage(event) {
    const input = event.target;
    const preview = document.getElementById('preview');
    const container = document.getElementById('preview-container');

    if (input.files && input.files[0]) {
      const reader = new FileReader();
      reader.onload = function(e) {
        preview.src = e.target.result;
        container.style.display = 'block';
      }
      reader.readAsDataURL(input.files[0]);
    }
  }
</script>

</body>
</html>
